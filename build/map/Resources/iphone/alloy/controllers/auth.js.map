{"version":3,"sources":["template.js","app/controllers/auth.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AD3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"/Users/samueleast/Documents/Appcelerator_Studio_Workspace/OTNet/Resources/iphone/alloy/controllers/auth.js","sourceRoot":"/Users/samueleast/Documents/Appcelerator_Studio_Workspace/OTNet","sourcesContent":["var Alloy = require('/alloy'),\n\tBackbone = Alloy.Backbone,\n\t_ = Alloy._;\n\n\n\n\nfunction __processArg(obj, key) {\n\tvar arg = null;\n\tif (obj) {\n\t\targ = obj[key] || null;\n\t}\n\treturn arg;\n}\n\nfunction Controller() {\n\t\n\trequire('/alloy/controllers/' + 'BaseController').apply(this, Array.prototype.slice.call(arguments));\n\tthis.__controllerPath = 'auth';\n\tthis.args = arguments[0] || {};\n\n\tif (arguments[0]) {\n\t\tvar __parentSymbol = __processArg(arguments[0], '__parentSymbol');\n\t\tvar $model = __processArg(arguments[0], '$model');\n\t\tvar __itemTemplate = __processArg(arguments[0], '__itemTemplate');\n\t}\n\tvar $ = this;\n\tvar exports = {};\n\tvar __defers = {};\n\n\t// Generated code that must be executed before all UI and/or\n\t// controller code. One example is all model and collection\n\t// declarations from markup.\n\t\n\n\t// Generated UI code\n\t$.__views.window = Ti.UI.createWindow(\n{navBarHidden:true,orientationModes:[Ti.UI.PORTRAIT,],backgroundColor:\"#000000\",id:\"window\",title:\"Auth\",}\n);\n$.__views.window && $.addTopLevelView($.__views.window);\n$.__views.container_logged = Ti.UI.createView(\n{layout:\"vertical\",width:Ti.UI.FILL,height:Ti.UI.SIZE,id:\"container_logged\",}\n);\n$.__views.window.add($.__views.container_logged);\n$.__views.customer_email = Ti.UI.createLabel(\n{color:\"white\",id:\"customer_email\",}\n);\n$.__views.container_logged.add($.__views.customer_email);\n$.__views.btn = Ti.UI.createButton(\n{top:10,left:10,right:10,height:40,color:\"#ffffff\",backgroundColor:\"#b0332a\",title:'Logout',id:\"btn\",}\n);\n$.__views.container_logged.add($.__views.btn);\nlogout?$.addListener($.__views.btn,'click',logout):__defers['$.__views.btn!click!logout']=true;$.__views.container_login = Ti.UI.createView(\n{layout:\"vertical\",width:Ti.UI.FILL,height:Ti.UI.SIZE,id:\"container_login\",}\n);\n$.__views.window.add($.__views.container_login);\n$.__views.login_email = Ti.UI.createTextField(\n{top:30,left:10,right:10,height:40,padding:{right:10,left:40,},color:\"#ffffff\",autocapitalization:true,autocorrect:false,returnKeyType:Titanium.UI.RETURNKEY_SEARCH,enableReturnKey:true,hintText:\"Email\",borderColor:\"#b0332a\",borderWidth:1,backgroundColor:\"#260205\",keyboardAppearance:Ti.UI.KEYBOARD_APPEARANCE_DARK,clearButtonMode:Ti.UI.INPUT_BUTTONMODE_ONFOCUS,id:\"login_email\",value:\"test@test2.com\",}\n);\n$.__views.container_login.add($.__views.login_email);\n$.__views.login_password = Ti.UI.createTextField(\n{top:30,left:10,right:10,height:40,padding:{right:10,left:40,},color:\"#ffffff\",autocapitalization:true,autocorrect:false,returnKeyType:Titanium.UI.RETURNKEY_SEARCH,enableReturnKey:true,hintText:\"Email\",borderColor:\"#b0332a\",borderWidth:1,backgroundColor:\"#260205\",keyboardAppearance:Ti.UI.KEYBOARD_APPEARANCE_DARK,clearButtonMode:Ti.UI.INPUT_BUTTONMODE_ONFOCUS,id:\"login_password\",}\n);\n$.__views.container_login.add($.__views.login_password);\n$.__views.btn = Ti.UI.createButton(\n{top:10,left:10,right:10,height:40,color:\"#ffffff\",backgroundColor:\"#b0332a\",title:'Submit',id:\"btn\",}\n);\n$.__views.container_login.add($.__views.btn);\nlogin?$.addListener($.__views.btn,'click',login):__defers['$.__views.btn!click!login']=true;$.__views.btn_blank = Ti.UI.createButton(\n{top:10,left:10,right:10,height:40,color:\"#ffffff\",title:'Regsiter',id:\"btn_blank\",}\n);\n$.__views.container_login.add($.__views.btn_blank);\nrbtn?$.addListener($.__views.btn_blank,'click',rbtn):__defers['$.__views.btn_blank!click!rbtn']=true;$.__views.container_register = Ti.UI.createView(\n{layout:\"vertical\",width:Ti.UI.FILL,height:Ti.UI.SIZE,id:\"container_register\",}\n);\n$.__views.window.add($.__views.container_register);\n$.__views.register_email = Ti.UI.createTextField(\n{top:30,left:10,right:10,height:40,padding:{right:10,left:40,},color:\"#ffffff\",autocapitalization:true,autocorrect:false,returnKeyType:Titanium.UI.RETURNKEY_SEARCH,enableReturnKey:true,hintText:\"Email\",borderColor:\"#b0332a\",borderWidth:1,backgroundColor:\"#260205\",keyboardAppearance:Ti.UI.KEYBOARD_APPEARANCE_DARK,clearButtonMode:Ti.UI.INPUT_BUTTONMODE_ONFOCUS,id:\"register_email\",value:\"test@test2.com\",}\n);\n$.__views.container_register.add($.__views.register_email);\n$.__views.register_password = Ti.UI.createTextField(\n{top:30,left:10,right:10,height:40,padding:{right:10,left:40,},color:\"#ffffff\",autocapitalization:true,autocorrect:false,returnKeyType:Titanium.UI.RETURNKEY_SEARCH,enableReturnKey:true,hintText:\"Email\",borderColor:\"#b0332a\",borderWidth:1,backgroundColor:\"#260205\",keyboardAppearance:Ti.UI.KEYBOARD_APPEARANCE_DARK,clearButtonMode:Ti.UI.INPUT_BUTTONMODE_ONFOCUS,id:\"register_password\",}\n);\n$.__views.container_register.add($.__views.register_password);\n$.__views.register_passconf = Ti.UI.createTextField(\n{top:30,left:10,right:10,height:40,padding:{right:10,left:40,},color:\"#ffffff\",autocapitalization:true,autocorrect:false,returnKeyType:Titanium.UI.RETURNKEY_SEARCH,enableReturnKey:true,hintText:\"Email\",borderColor:\"#b0332a\",borderWidth:1,backgroundColor:\"#260205\",keyboardAppearance:Ti.UI.KEYBOARD_APPEARANCE_DARK,clearButtonMode:Ti.UI.INPUT_BUTTONMODE_ONFOCUS,id:\"register_passconf\",}\n);\n$.__views.container_register.add($.__views.register_passconf);\n$.__views.btn = Ti.UI.createButton(\n{top:10,left:10,right:10,height:40,color:\"#ffffff\",backgroundColor:\"#b0332a\",title:'Submit',id:\"btn\",}\n);\n$.__views.container_register.add($.__views.btn);\nregister?$.addListener($.__views.btn,'click',register):__defers['$.__views.btn!click!register']=true;$.__views.btn_blank = Ti.UI.createButton(\n{top:10,left:10,right:10,height:40,color:\"#ffffff\",title:'Login',id:\"btn_blank\",}\n);\n$.__views.container_register.add($.__views.btn_blank);\nlbtn?$.addListener($.__views.btn_blank,'click',lbtn):__defers['$.__views.btn_blank!click!lbtn']=true;if ((OS_IOS)) {\n$.__views.navbar = Alloy.createController('views/navbar',{id:\"navbar\",__parentSymbol:$.__views.window,});\n$.__views.navbar.setParent($.__views.window);\n}\nexports.destroy = function () {};\n\n\t// make all IDed elements in $.__views available right on the $ in a\n\t// controller's internal code. Externally the IDed elements will\n\t// be accessed with getView().\n\t_.extend($, $.__views);\n\n\t// Controller code directly from the developer's controller file\n\t__MAPMARKER_CONTROLLER_CODE__\n\n\t// Generated code that must be executed after all UI and\n\t// controller code. One example deferred event handlers whose\n\t// functions are not defined until after the controller code\n\t// is executed.\n\t__defers['$.__views.btn!click!logout'] && $.addListener($.__views.btn,'click',logout);__defers['$.__views.btn!click!login'] && $.addListener($.__views.btn,'click',login);__defers['$.__views.btn_blank!click!rbtn'] && $.addListener($.__views.btn_blank,'click',rbtn);__defers['$.__views.btn!click!register'] && $.addListener($.__views.btn,'click',register);__defers['$.__views.btn_blank!click!lbtn'] && $.addListener($.__views.btn_blank,'click',lbtn);\n\n\t// Extend the $ instance with all functions and properties\n\t// defined on the exports object.\n\t_.extend($, exports);\n}\n\nmodule.exports = Controller;\n","var api = require('apiService');\n\nvar args = arguments[0] || {};\n\n$.container_login.hide();\n$.container_register.hide();\n$.container_logged.hide();\n\napi.getCustomerService({\n  endpoint: \"/v1/access\" },\nfunction (_response) {\n\n  if (_response.status) {\n\n    $.customer_email.text = _response.data.email;\n    $.container_logged.show();\n\n  } else {\n\n    $.container_login.show();\n\n  }\n\n});\n\nfunction rbtn() {\n\n  $.container_login.hide();\n  $.container_register.show();\n  $.container_logged.hide();\n\n}\n\nfunction lbtn() {\n\n  $.container_login.show();\n  $.container_register.hide();\n  $.container_logged.hide();\n\n}\n\nfunction logout() {\n\n  Ti.App.Properties.setString('token', '');\n\n  $.container_login.show();\n  $.container_register.hide();\n  $.container_logged.hide();\n\n\n}\n\nfunction login(e) {\n\n  var email = $.login_email.value;\n  var password = '6q4vfVSPLt$dA7Sg'; //.login_password.value;\n\n  api.postService({\n    endpoint: \"/v1/customers/login\",\n    email: email,\n    password: password },\n  function (_response) {\n\n    if (_response.status) {\n\n      console.log('_response', _response);\n\n      Ti.App.Properties.setString('token', _response.token);\n\n      api.getCustomerService({\n        endpoint: \"/v1/access\" },\n      function (_response) {\n\n        if (_response.status) {\n\n          console.log('_response', _response);\n\n          $.customer_email.text = _response.data.email;\n          $.container_login.hide();\n          $.container_register.hide();\n          $.container_logged.show();\n\n        } else {\n\n          $.container_login.show();\n          $.container_register.hide();\n          $.container_logged.hide();\n\n        }\n\n      });\n\n    } else {\n\n      alert(_response.message);\n\n    }\n\n  });\n\n}\n\nfunction register(e) {\n\n  var email = $.register_email.value;\n  var password = '6q4vfVSPLt$dA7Sg'; //.register_password.value;\n  var passconf = '6q4vfVSPLt$dA7Sg'; //.register_passconf.value;\n\n  api.postService({\n    endpoint: \"/v1/customers/register\",\n    email: email,\n    password: password,\n    passconf: passconf },\n  function (_response) {\n\n    if (_response.status) {\n\n      console.log('_response', _response);\n\n      Ti.App.Properties.setString('token', _response.token);\n\n      api.getCustomerService({\n        endpoint: \"/v1/access\" },\n      function (_response) {\n\n        if (_response.status) {\n\n          console.log('_response', _response);\n\n          $.customer_email.text = _response.data.email;\n          $.container_login.hide();\n          $.container_register.hide();\n          $.container_logged.show();\n\n        } else {\n\n          $.container_login.show();\n          $.container_register.hide();\n          $.container_logged.hide();\n\n        }\n\n      });\n\n    } else {\n\n      alert(_response.message);\n\n    }\n\n  });\n\n}"]}